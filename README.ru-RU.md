# Знакомство с Travis

<div align="center">
    <a href="https://travis-ci.com/">
        <img src="https://travis-ci.com/images/logos/Tessa-pride-4.svg" width="175">
    </a>
</div>
<br />

<div align="center">

[![Build Status](https://travis-ci.org/dwyl/learn-travis.svg?branch=master)](https://travis-ci.org/dwyl/learn-travis)
[![contributions welcome](https://img.shields.io/badge/contributions-welcome-brightgreen.svg?style=flat)](https://github.com/dwyl/learn-travis/issues)
[![HitCount](https://hits.dwyl.io/dwyl/learn-travis.svg)](https://hits.dwyl.io/dwyl/learn-travis)

</div>

Наше ***краткое руководство*** по **Travis CI** (*Непрерывная Интеграция*)
для ***начинающих***

##  Индекс

1.  [Зачем](#зачем)
2.  [Что](#что)
    1.  [Основные преимущества Travis-CI](#ключевые-преимущества)
3.  [Как](#как)
    1.  [Предпосылки](#предпосылки)
    2.  [Начало работы](#начало-работы)
    3.  [Создание файлов для проекта](#создание-файлов-для-проекта)
    4.  [Определение тестов](#определение-тестов)
    5.  [Наблюдение за неудачами](#наблюдение-за-неудачами)
    6.  [Правильный код для прохождения сборки](#correct-code-to-pass-build)
4.  [Пример](#пример)
5.  [Использование переменных окружений с Travis!](#переменная-окружения)
    1. [Включение переменных окружений в вашем `.travis.yml` файле](#переменные-окружения-travis.yml)
    2. [Добавление переменных окружений в веб-интерфейс](#переменные-окружения-web-интерфейс)
    3. [Безопасные (Зашифрованные) переменные среды](#защищенные-переменные-окружения)
6.  [**Непрерывная _доставка_**](#непрерывная-доставка)
    1. [Добавление зашифрованных ключей SSH]()
7.  [Elm Lang](#elm-lang)
8.  [Elixir](#elixir-lang)
9.  [Установка Travis-CLI на Ubuntu](#установка-travis-cli-на-ubuntu)
10.  [Идти дальше](#идти-дальше)
    1.  [Дополнительно об Общей CI (Непрерывная интеграция)](#общая-ci)
    2.  [Спецификация Travis](#спецификация-travis)
    3.  [Конкуренты](#конкуренты)

<a name="зачем"></a>
## Зачем?

Тестирование вашей работы (чтобы **убедиться**, что она работает должным образом) является наиболее важной частью проекта.

![Toilet Roll Blocks Seat FAIL](https://user-images.githubusercontent.com/194400/28815447-5458823c-7699-11e7-8c65-bcf9e4569388.png "Toilet Roll Blocks Seat from Closing. Fail!")

> ***CI*** поможет тебе **тестировать рано и часто**, чтобы обнаружить "*проблемы интеграции*"
_пока не стало слишком поздно ..._
> **Travis CI** избавляет от *необходимости* использовать собственный CI, чтобы вы могли сосредоточиться на своем проекте/продукте!

<a name="что"></a>
## Что?

> **Н**епрерывная **И**нтеграция - это процесс разработки программного обеспечения
> в котором **вся работа по разработке интегрирована** в заранее определенное время
> или событие, и полученная ***работа автоматически проверена и построена***.
> Идея состоит в том, что **ошибки разработки** выявляются очень рано в этом процессе.

Если вы ***полный новичек*** в Непрерывной Интеграции (CI)
мы ***рекомендуем прочитать*** [**статью CI в Wikipedia**](https://ru.wikipedia.org/wiki/Continuous_integration)
и [статью о CI](https://www.martinfowler.com/articles/continuousIntegration.html) Мартина Фаулера.

**Заметка**: Оба они довольно *объемными*
но содержат всю необходимую информацию.
Прочтите их! Если у вас остались вопросы,
[*спроси*!](https://github.com/dwyl/learn-travis/issues)

<a name="ключевые-преимущества"></a>
### *Основные преимущества Travis-CI* of Travis-CI:

- **Ничего для** ***Установки*** (Travis имеет Веб-основу,
  *А* ***Не*** ***тяжелую Java***
  *Приложение, которое вы должны разместить самостоятельно*<sup>1</sup>)
- **Бесплатно** как для *Использования* так и с **Открытым исходным кодом** (MIT Лицезция) см: https://about.travis-ci.com/
- Хорошо **интегрируется** с **GitHub** (*без лишних усилий разработчика*!)


<sup>1</sup>Мы использовали [Jenkins CI](https://jenkins-ci.org) в прошлом для *клиенских* проектов,  
и **Jenkins** имеет
[***крутое обучение***](https://shop.oreilly.com/product/0636920010326.do)
для *резработчиков-новичков*.  
**Travis** *по контрасту* ***уступает*** ему!

<a name="как"></a>
## Как?

Этот учебник займет у вас **20 минут** и ***сэкономит вам часы***
разочарования! #**БезМозгов**

<a name="pre-requisites"></a>
### Pre-requisites

+ **Компьютер** *с* ***установленым*** **node.js**
+ любой **текстовый редактор**
+ машина с системой Debian (Например Ubuntu)

Если у вас их нет, смотрите: https://github.com/dwyl/start-here.
Если у вас нет системы Linux, этот учебник будет по-прежнему применяться, за исключением
некоторые из используемых инструментов и главы 6.

<a name="начало-работы"></a>
### Начало работы

Подпишитесь на [Travis Getting Started](https://about.travis-ci.com/docs/user/getting-started/) руководство:

> Посетите: https://travis-ci.com/ и нажмите "**Войти через GitHub**" "регистрация" не требуется.

![Travis Login with GitHub](https://user-images.githubusercontent.com/7784660/42061902-fed5be72-7b2b-11e8-9f70-7c4eec7e1807.jpg "Sign in with GitHub")

> Вы будете перенаправлены на GitHub, где вам нужно нажать "**Авторизовать приложение**"

![Authorize Travis at GitHub](https://user-images.githubusercontent.com/7784660/42060974-e6384036-7b28-11e8-9aa1-1535dabe0dee.jpg "Authorize Travis GitHub")

**Заметка**: Если вы когда-нибудь захотите *остановить* доступ Travis к вашей учетной записи GitHub,
просто посетите: https://github.com/settings/applications и нажмите на *отозвать*.

> Как только вы разрешите доступ, вы будете перенаправлены обратно в Travis  
> где вам нужно будет включить конкретный репозиторий Git. 
> Вы также можете сделать это в своем профиле Travis:
https://travis-ci.com/profile

<a name="создание-файлов-для-проекта"></a>
### Создание файлов для проекта

В данном примере структура проекта и файлы, которые вам понадобятся:

```
папка_проекта
|_.travis.yml
|_hello.js
|_package.json
|_другие_файлы
```

Как только вы подключили свой проект к Travis, каждый раз, когда вы загружаете новую версию в GitHub
Трэвис будет искать файлы по всей папке вашего проекта, строить ваш проект и
запускать все тесты автоматически. Таким образом, вам не нужно указывать, какие папки
Travis должен проверить - он всегда **проверяет все**!

Но для начала, создадим файл `.travis.yml` и вставим следующий код:

```yml
language: node_js
node_js:
 - "node"
```

**.travis.yml** это основной конфигурационный файл Travis
что говорит travis-ci, что ожидать и как себя вести для нашего приложения.

В этом случае этот файл сообщает Travis, что мы запускаем *Node.js*. Не только это, оно также
говорит Travis использовать последнюю версию Node.js. Вы также можете указать конкретные
версии, если вы хотите настроить процесс сборки:

 - https://docs.travis-ci.com/user/languages/javascript-with-nodejs/
 - https://docs.travis-ci.com/user/customizing-the-build/
 
Поскольку этот конкретный файл очень важен, обязательно поместите его в
корневую папку вашего проекта и проверьте его через
[Travis-CLI](#установка-travis-cli-на-ubuntu) или через [WebLint](https://lint.travis-ci.com/).

Во вторых, давайте создадим наш `hello.js` файл путем вставки следующего кода:

```javascript
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello Travis!\n')
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/');
```
<a name="определение-тестов"></a>
### Определение тестов

Ранее мы упоминали, что Travis запускает все тесты автоматически. Но
откуда он знает, где тесты? И какие файлы нужно запустить?

Это в файле **package.json**. Этот файл содержит элемент `scripts`, где вы можете
укажите команду `test`, которую Travis будет искать и запускать!

Создайте файл `package.json` и вставьте следующее:

```javascript
{
  "name": "learn-travis-YOURNAME",
  "description": "Simple Travis-CI check for JSHint (Code Linting)",
  "author": "your name here :-)",
  "version": "0.0.1",
  "devDependencies": {
    "jshint": "^2.6.0"
  },
  "scripts": {
    "test": "jshint hello.js"
  }
}
```

Этот файл говорит Travis запустить `jshint` в нашем файле` hello.js`.
`jshint` это программа, которая анализирует качество кода, поэтому она идеально подходит для использования теста!

Чтобы запустить тестовую команду, нам нужно установить модуль узла `jshint` из NPM:

```sh
npm install jshint --save-dev
```

Теперь вы можете запустить команду `test` *локально*, набрав `npm test` в своем терминале.

Если вы это сделаете, вы увидите, что тест не прошел. Но мы не будем знакомить тебя с Travis.
вы можете запускать тесты вручную, это работа для Travis! Давайте посмотрим, как Travis может выполнять тесты
автоматически!
